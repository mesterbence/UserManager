@if (dataSource) {
  <table mat-table class="mat-elevation-z8" [dataSource]="dataSource" multiTemplateDataRows>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let element; columns: displayedColumns;" class="main-row"
        [class.example-expanded-row]="expanded === element" (click)="toggleRow(element)">
    </tr>
    <tr mat-row *matRowDef="let row; columns: ['details']" class="detail-row"></tr>

    <ng-container matColumnDef="lastName">
      <th mat-header-cell *matHeaderCellDef>Vezetéknév</th>
      <td mat-cell *matCellDef="let element"> {{ element.lastName }}</td>
    </ng-container>

    <ng-container matColumnDef="firstName">
      <th mat-header-cell *matHeaderCellDef>Keresztnév</th>
      <td mat-cell *matCellDef="let element"> {{ element.firstName }}</td>
    </ng-container>

    <ng-container matColumnDef="birthName">
      <th mat-header-cell *matHeaderCellDef>Születési név</th>
      <td mat-cell *matCellDef="let element"> {{ element.birthName }}</td>
    </ng-container>

    <ng-container matColumnDef="phone">
      <th mat-header-cell *matHeaderCellDef>Telefonszám</th>
      <td mat-cell *matCellDef="let element"> {{ element.phone }}</td>
    </ng-container>

    <ng-container matColumnDef="taxNumber">
      <th mat-header-cell *matHeaderCellDef>Adószám</th>
      <td mat-cell *matCellDef="let element"> {{ element.taxNumber }}</td>
    </ng-container>

    <ng-container matColumnDef="details">
      <td mat-cell *matCellDef="let element" [attr.colspan]="displayedColumns.length">
        <div class="detail-view" [@showDetails]="element == expanded ? 'expanded' : 'collapsed'">
          <hr>
          <div>Vezetéknév: {{ element.lastName }}</div>
          <div>Keresztnév: {{ element.firstName }}</div>
          <div>Születési név: {{ element.birthName }}</div>
          <div>Anyja neve: {{ element.mothersName }}</div>
          <div>Nem: {{ element.gender?.name }}</div>
          <div>Nemzetiség: {{ element.nationality.name }}</div>
          @for (address of element.addresses; track address) {
            <div>{{ getAddressType(address.type) }}: {{ address.city }} {{ address.street }} {{ address.number }}</div>
          }
          <div>Telefon: {{ element.phone }}</div>
          <div>Adószám: {{ element.taxNumber }}</div>
        </div>
      </td>
    </ng-container>


  </table>
  <div class="container">
    <div class="row text-center">
      <div>
        <button type="button" class="btn btn-primary" (click)="open(new)">Új személy felvétele</button>
      </div>
    </div>
  </div>


}
<ng-template #new let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Új személy felvétele</h4>
    <button type="button" class="btn-close" (click)="modal.dismiss()"></button>
  </div>
  <form [formGroup]="newUserFormGroup" (ngSubmit)="onSubmit()">
    <div class="modal-body top-index">
      <div class="w-100">
        <p>
          <label for="lastName">Vezetéknév</label>
          <input type="text" class="form-control" id="lastName">
        </p>
        <p>
          <label for="firstName">Keresztnév</label>
          <input type="text" class="form-control" id="firstName">
        </p>
        <p>
          <label for="birthName">Születési név</label>
          <input type="text" class="form-control" id="birthName">
        </p>
        <p>
          <label for="mothersName">Anyja neve</label>
          <input type="text" class="form-control" id="mothersName">
        </p>
        <p>
          <label for="phone">Telefon</label>
          <input type="text" class="form-control" id="phone">
        </p>
        <p>
          <label for="taxNumber">Adószám</label>
          <input type="text" class="form-control" id="taxNumber">
        </p>
      </div>
    </div>
    <div class="modal-footer">
      <button type="submit" class="btn btn-primary w-100">Felvétel</button>
    </div>
  </form>
</ng-template>
